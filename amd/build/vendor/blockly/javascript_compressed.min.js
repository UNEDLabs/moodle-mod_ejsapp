define ("mod_ejsapp/vendor/blockly/javascript_compressed",["mod_ejsapp/vendor/blockly/blockly_compressed"],function(i){'use strict';i.JavaScript=new i.Generator("JavaScript");i.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(i.utils.global).join(","));i.JavaScript.ORDER_ATOMIC=0;i.JavaScript.ORDER_NEW=1.1;i.JavaScript.ORDER_MEMBER=1.2;i.JavaScript.ORDER_FUNCTION_CALL=2;i.JavaScript.ORDER_INCREMENT=3;i.JavaScript.ORDER_DECREMENT=3;i.JavaScript.ORDER_BITWISE_NOT=4.1;i.JavaScript.ORDER_UNARY_PLUS=4.2;i.JavaScript.ORDER_UNARY_NEGATION=4.3;i.JavaScript.ORDER_LOGICAL_NOT=4.4;i.JavaScript.ORDER_TYPEOF=4.5;i.JavaScript.ORDER_VOID=4.6;i.JavaScript.ORDER_DELETE=4.7;i.JavaScript.ORDER_AWAIT=4.8;i.JavaScript.ORDER_EXPONENTIATION=5;i.JavaScript.ORDER_MULTIPLICATION=5.1;i.JavaScript.ORDER_DIVISION=5.2;i.JavaScript.ORDER_MODULUS=5.3;i.JavaScript.ORDER_SUBTRACTION=6.1;i.JavaScript.ORDER_ADDITION=6.2;i.JavaScript.ORDER_BITWISE_SHIFT=7;i.JavaScript.ORDER_RELATIONAL=8;i.JavaScript.ORDER_IN=8;i.JavaScript.ORDER_INSTANCEOF=8;i.JavaScript.ORDER_EQUALITY=9;i.JavaScript.ORDER_BITWISE_AND=10;i.JavaScript.ORDER_BITWISE_XOR=11;i.JavaScript.ORDER_BITWISE_OR=12;i.JavaScript.ORDER_LOGICAL_AND=13;i.JavaScript.ORDER_LOGICAL_OR=14;i.JavaScript.ORDER_CONDITIONAL=15;i.JavaScript.ORDER_ASSIGNMENT=16;i.JavaScript.ORDER_YIELD=17;i.JavaScript.ORDER_COMMA=18;i.JavaScript.ORDER_NONE=99;i.JavaScript.ORDER_OVERRIDES=[[i.JavaScript.ORDER_FUNCTION_CALL,i.JavaScript.ORDER_MEMBER],[i.JavaScript.ORDER_FUNCTION_CALL,i.JavaScript.ORDER_FUNCTION_CALL],[i.JavaScript.ORDER_MEMBER,i.JavaScript.ORDER_MEMBER],[i.JavaScript.ORDER_MEMBER,i.JavaScript.ORDER_FUNCTION_CALL],[i.JavaScript.ORDER_LOGICAL_NOT,i.JavaScript.ORDER_LOGICAL_NOT],[i.JavaScript.ORDER_MULTIPLICATION,i.JavaScript.ORDER_MULTIPLICATION],[i.JavaScript.ORDER_ADDITION,i.JavaScript.ORDER_ADDITION],[i.JavaScript.ORDER_LOGICAL_AND,i.JavaScript.ORDER_LOGICAL_AND],[i.JavaScript.ORDER_LOGICAL_OR,i.JavaScript.ORDER_LOGICAL_OR]];i.JavaScript.init=function(e){i.JavaScript.definitions_=Object.create(null);i.JavaScript.functionNames_=Object.create(null);i.JavaScript.variableDB_?i.JavaScript.variableDB_.reset():i.JavaScript.variableDB_=new i.Names(i.JavaScript.RESERVED_WORDS_);i.JavaScript.variableDB_.setVariableMap(e.getVariableMap());for(var f=[],b=i.Variables.allDeveloperVariables(e),c=0;c<b.length;c++){f.push(i.JavaScript.variableDB_.getName(b[c],i.Names.DEVELOPER_VARIABLE_TYPE))}e=i.Variables.allUsedVarModels(e);for(c=0;c<e.length;c++){f.push(i.JavaScript.variableDB_.getName(e[c].getId(),i.VARIABLE_CATEGORY_NAME))}f.length&&(i.JavaScript.definitions_.variables="var "+f.join(", ")+";")};i.JavaScript.finish=function(d){var a=[],b;for(b in i.JavaScript.definitions_){a.push(i.JavaScript.definitions_[b])}delete i.JavaScript.definitions_;delete i.JavaScript.functionNames_;i.JavaScript.variableDB_.reset();return a.join("\n\n")+"\n\n\n"+d};i.JavaScript.scrubNakedValue=function(b){return b+";\n"};i.JavaScript.quote_=function(b){b=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+b+"'"};i.JavaScript.multiline_quote_=function(b){return b.split(/\n/g).map(i.JavaScript.quote_).join(" + '\\n' +\n")};i.JavaScript.scrub_=function(g,h,b){var j="";if(!g.outputConnection||!g.outputConnection.targetConnection){var k=g.getCommentText();k&&(k=i.utils.string.wrap(k,i.JavaScript.COMMENT_WRAP-3),j+=i.JavaScript.prefixLines(k+"\n","// "));for(var l=0;l<g.inputList.length;l++){g.inputList[l].type==i.INPUT_VALUE&&(k=g.inputList[l].connection.targetBlock())&&(k=i.JavaScript.allNestedComments(k))&&(j+=i.JavaScript.prefixLines(k,"// "))}}g=g.nextConnection&&g.nextConnection.targetBlock();b=b?"":i.JavaScript.blockToCode(g);return j+h+b};i.JavaScript.getAdjusted=function(h,j,b,k,d){b=b||0;d=d||i.JavaScript.ORDER_NONE;h.workspace.options.oneBasedIndex&&b--;var l=h.workspace.options.oneBasedIndex?"1":"0";h=0<b?i.JavaScript.valueToCode(h,j,i.JavaScript.ORDER_ADDITION)||l:0>b?i.JavaScript.valueToCode(h,j,i.JavaScript.ORDER_SUBTRACTION)||l:k?i.JavaScript.valueToCode(h,j,i.JavaScript.ORDER_UNARY_NEGATION)||l:i.JavaScript.valueToCode(h,j,d)||l;if(i.isNumber(h))h=+h+b,k&&(h=-h);else{if(0<b){h=h+" + "+b;var f=i.JavaScript.ORDER_ADDITION}else 0>b&&(h=h+" - "+-b,f=i.JavaScript.ORDER_SUBTRACTION);k&&(h=b?"-("+h+")":"-"+h,f=i.JavaScript.ORDER_UNARY_NEGATION);f=Math.floor(f);d=Math.floor(d);f&&d>=f&&(h="("+h+")")}return h};i.JavaScript.colour={};i.JavaScript.colour_picker=function(b){return[i.JavaScript.quote_(b.getFieldValue("COLOUR")),i.JavaScript.ORDER_ATOMIC]};i.JavaScript.colour_random=function(){return[i.JavaScript.provideFunction_("colourRandom",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.colour_rgb=function(d){var e=i.JavaScript.valueToCode(d,"RED",i.JavaScript.ORDER_COMMA)||0,b=i.JavaScript.valueToCode(d,"GREEN",i.JavaScript.ORDER_COMMA)||0;d=i.JavaScript.valueToCode(d,"BLUE",i.JavaScript.ORDER_COMMA)||0;return[i.JavaScript.provideFunction_("colourRgb",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+e+", "+b+", "+d+")",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.colour_blend=function(d){var e=i.JavaScript.valueToCode(d,"COLOUR1",i.JavaScript.ORDER_COMMA)||"'#000000'",b=i.JavaScript.valueToCode(d,"COLOUR2",i.JavaScript.ORDER_COMMA)||"'#000000'";d=i.JavaScript.valueToCode(d,"RATIO",i.JavaScript.ORDER_COMMA)||.5;return[i.JavaScript.provideFunction_("colourBlend",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+e+", "+b+", "+d+")",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.lists={};i.JavaScript.lists_create_empty=function(){return["[]",i.JavaScript.ORDER_ATOMIC]};i.JavaScript.lists_create_with=function(d){for(var a=Array(d.itemCount_),b=0;b<d.itemCount_;b++){a[b]=i.JavaScript.valueToCode(d,"ADD"+b,i.JavaScript.ORDER_COMMA)||"null"}return["["+a.join(", ")+"]",i.JavaScript.ORDER_ATOMIC]};i.JavaScript.lists_repeat=function(d){var e=i.JavaScript.provideFunction_("listsRepeat",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"]),b=i.JavaScript.valueToCode(d,"ITEM",i.JavaScript.ORDER_COMMA)||"null";d=i.JavaScript.valueToCode(d,"NUM",i.JavaScript.ORDER_COMMA)||"0";return[e+"("+b+", "+d+")",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.lists_length=function(b){return[(i.JavaScript.valueToCode(b,"VALUE",i.JavaScript.ORDER_MEMBER)||"[]")+".length",i.JavaScript.ORDER_MEMBER]};i.JavaScript.lists_isEmpty=function(b){return["!"+(i.JavaScript.valueToCode(b,"VALUE",i.JavaScript.ORDER_MEMBER)||"[]")+".length",i.JavaScript.ORDER_LOGICAL_NOT]};i.JavaScript.lists_indexOf=function(d){var a="FIRST"==d.getFieldValue("END")?"indexOf":"lastIndexOf",e=i.JavaScript.valueToCode(d,"FIND",i.JavaScript.ORDER_NONE)||"''";a=(i.JavaScript.valueToCode(d,"VALUE",i.JavaScript.ORDER_MEMBER)||"[]")+"."+a+"("+e+")";return d.workspace.options.oneBasedIndex?[a+" + 1",i.JavaScript.ORDER_ADDITION]:[a,i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.lists_getIndex=function(e){var f=e.getFieldValue("MODE")||"GET",b=e.getFieldValue("WHERE")||"FROM_START",c=i.JavaScript.valueToCode(e,"VALUE","RANDOM"==b?i.JavaScript.ORDER_COMMA:i.JavaScript.ORDER_MEMBER)||"[]";switch(b){case"FIRST":if("GET"==f)return[c+"[0]",i.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==f)return[c+".shift()",i.JavaScript.ORDER_MEMBER];if("REMOVE"==f)return c+".shift();\n";break;case"LAST":if("GET"==f)return[c+".slice(-1)[0]",i.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==f)return[c+".pop()",i.JavaScript.ORDER_MEMBER];if("REMOVE"==f)return c+".pop();\n";break;case"FROM_START":e=i.JavaScript.getAdjusted(e,"AT");if("GET"==f)return[c+"["+e+"]",i.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==f)return[c+".splice("+e+", 1)[0]",i.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==f)return c+".splice("+e+", 1);\n";break;case"FROM_END":e=i.JavaScript.getAdjusted(e,"AT",1,!0);if("GET"==f)return[c+".slice("+e+")[0]",i.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==f)return[c+".splice("+e+", 1)[0]",i.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==f)return c+".splice("+e+", 1);";break;case"RANDOM":c=i.JavaScript.provideFunction_("listsGetRandomItem",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+c+", "+("GET"!=f)+")";if("GET"==f||"GET_REMOVE"==f)return[c,i.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==f)return c+";\n";}throw Error("Unhandled combination (lists_getIndex).")};i.JavaScript.lists_setIndex=function(g){function h(){if(j.match(/^\w+$/))return"";var c=i.JavaScript.variableDB_.getDistinctName("tmpList",i.VARIABLE_CATEGORY_NAME),a="var "+c+" = "+j+";\n";j=c;return a}var j=i.JavaScript.valueToCode(g,"LIST",i.JavaScript.ORDER_MEMBER)||"[]",b=g.getFieldValue("MODE")||"GET",d=g.getFieldValue("WHERE")||"FROM_START",k=i.JavaScript.valueToCode(g,"TO",i.JavaScript.ORDER_ASSIGNMENT)||"null";switch(d){case"FIRST":if("SET"==b)return j+"[0] = "+k+";\n";if("INSERT"==b)return j+".unshift("+k+");\n";break;case"LAST":if("SET"==b)return g=h(),g+(j+"["+j+".length - 1] = "+k+";\n");if("INSERT"==b)return j+".push("+k+");\n";break;case"FROM_START":d=i.JavaScript.getAdjusted(g,"AT");if("SET"==b)return j+"["+d+"] = "+k+";\n";if("INSERT"==b)return j+".splice("+d+", 0, "+k+");\n";break;case"FROM_END":d=i.JavaScript.getAdjusted(g,"AT",1,!1,i.JavaScript.ORDER_SUBTRACTION);g=h();if("SET"==b)return g+(j+"["+j+".length - "+d+"] = "+k+";\n");if("INSERT"==b)return g+(j+".splice("+j+".length - "+d+", 0, "+k+");\n");break;case"RANDOM":g=h();d=i.JavaScript.variableDB_.getDistinctName("tmpX",i.VARIABLE_CATEGORY_NAME);g+="var "+d+" = Math.floor(Math.random() * "+j+".length);\n";if("SET"==b)return g+(j+"["+d+"] = "+k+";\n");if("INSERT"==b)return g+(j+".splice("+d+", 0, "+k+");\n");}throw Error("Unhandled combination (lists_setIndex).")};i.JavaScript.lists.getIndex_=function(d,a,b){return"FIRST"==a?"0":"FROM_END"==a?d+".length - 1 - "+b:"LAST"==a?d+".length - 1":b};i.JavaScript.lists_getSublist=function(h){var j=i.JavaScript.valueToCode(h,"LIST",i.JavaScript.ORDER_MEMBER)||"[]",k=h.getFieldValue("WHERE1"),c=h.getFieldValue("WHERE2");if("FIRST"==k&&"LAST"==c)j+=".slice(0)";else if(j.match(/^\w+$/)||"FROM_END"!=k&&"FROM_START"==c){switch(k){case"FROM_START":var d=i.JavaScript.getAdjusted(h,"AT1");break;case"FROM_END":d=i.JavaScript.getAdjusted(h,"AT1",1,!1,i.JavaScript.ORDER_SUBTRACTION);d=j+".length - "+d;break;case"FIRST":d="0";break;default:throw Error("Unhandled option (lists_getSublist).");}switch(c){case"FROM_START":h=i.JavaScript.getAdjusted(h,"AT2",1);break;case"FROM_END":h=i.JavaScript.getAdjusted(h,"AT2",0,!1,i.JavaScript.ORDER_SUBTRACTION);h=j+".length - "+h;break;case"LAST":h=j+".length";break;default:throw Error("Unhandled option (lists_getSublist).");}j=j+".slice("+d+", "+h+")"}else{d=i.JavaScript.getAdjusted(h,"AT1");h=i.JavaScript.getAdjusted(h,"AT2");var l=i.JavaScript.lists.getIndex_,f={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};j=i.JavaScript.provideFunction_("subsequence"+f[k]+f[c],["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==k||"FROM_START"==k?", at1":"")+("FROM_END"==c||"FROM_START"==c?", at2":"")+") {","  var start = "+l("sequence",k,"at1")+";","  var end = "+l("sequence",c,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+j+("FROM_END"==k||"FROM_START"==k?", "+d:"")+("FROM_END"==c||"FROM_START"==c?", "+h:"")+")"}return[j,i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.lists_sort=function(e){var f=i.JavaScript.valueToCode(e,"LIST",i.JavaScript.ORDER_FUNCTION_CALL)||"[]",b="1"===e.getFieldValue("DIRECTION")?1:-1;e=e.getFieldValue("TYPE");var c=i.JavaScript.provideFunction_("listsGetSortCompare",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {","    \"NUMERIC\": function(a, b) {","        return Number(a) - Number(b); },","    \"TEXT\": function(a, b) {","        return a.toString() > b.toString() ? 1 : -1; },","    \"IGNORE_CASE\": function(a, b) {","        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"]);return[f+".slice().sort("+c+"(\""+e+"\", "+b+"))",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.lists_split=function(d){var e=i.JavaScript.valueToCode(d,"INPUT",i.JavaScript.ORDER_MEMBER),f=i.JavaScript.valueToCode(d,"DELIM",i.JavaScript.ORDER_NONE)||"''";d=d.getFieldValue("MODE");if("SPLIT"==d)e||(e="''"),d="split";else if("JOIN"==d)e||(e="[]"),d="join";else throw Error("Unknown mode: "+d);return[e+"."+d+"("+f+")",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.lists_reverse=function(b){return[(i.JavaScript.valueToCode(b,"LIST",i.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.logic={};i.JavaScript.controls_if=function(f){var a=0,g="";i.JavaScript.STATEMENT_PREFIX&&(g+=i.JavaScript.injectId(i.JavaScript.STATEMENT_PREFIX,f));do{var h=i.JavaScript.valueToCode(f,"IF"+a,i.JavaScript.ORDER_NONE)||"false",d=i.JavaScript.statementToCode(f,"DO"+a);i.JavaScript.STATEMENT_SUFFIX&&(d=i.JavaScript.prefixLines(i.JavaScript.injectId(i.JavaScript.STATEMENT_SUFFIX,f),i.JavaScript.INDENT)+d);g+=(0<a?" else ":"")+"if ("+h+") {\n"+d+"}";++a}while(f.getInput("IF"+a));if(f.getInput("ELSE")||i.JavaScript.STATEMENT_SUFFIX)d=i.JavaScript.statementToCode(f,"ELSE"),i.JavaScript.STATEMENT_SUFFIX&&(d=i.JavaScript.prefixLines(i.JavaScript.injectId(i.JavaScript.STATEMENT_SUFFIX,f),i.JavaScript.INDENT)+d),g+=" else {\n"+d+"}";return g+"\n"};i.JavaScript.controls_ifelse=i.JavaScript.controls_if;i.JavaScript.logic_compare=function(e){var f={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],b="=="==f||"!="==f?i.JavaScript.ORDER_EQUALITY:i.JavaScript.ORDER_RELATIONAL,c=i.JavaScript.valueToCode(e,"A",b)||"0";e=i.JavaScript.valueToCode(e,"B",b)||"0";return[c+" "+f+" "+e,b]};i.JavaScript.logic_operation=function(f){var g="AND"==f.getFieldValue("OP")?"&&":"||",b="&&"==g?i.JavaScript.ORDER_LOGICAL_AND:i.JavaScript.ORDER_LOGICAL_OR,c=i.JavaScript.valueToCode(f,"A",b);f=i.JavaScript.valueToCode(f,"B",b);if(c||f){var h="&&"==g?"true":"false";c||(c=h);f||(f=h)}else f=c="false";return[c+" "+g+" "+f,b]};i.JavaScript.logic_negate=function(c){var a=i.JavaScript.ORDER_LOGICAL_NOT;return["!"+(i.JavaScript.valueToCode(c,"BOOL",a)||"true"),a]};i.JavaScript.logic_boolean=function(b){return["TRUE"==b.getFieldValue("BOOL")?"true":"false",i.JavaScript.ORDER_ATOMIC]};i.JavaScript.logic_null=function(){return["null",i.JavaScript.ORDER_ATOMIC]};i.JavaScript.logic_ternary=function(d){var e=i.JavaScript.valueToCode(d,"IF",i.JavaScript.ORDER_CONDITIONAL)||"false",b=i.JavaScript.valueToCode(d,"THEN",i.JavaScript.ORDER_CONDITIONAL)||"null";d=i.JavaScript.valueToCode(d,"ELSE",i.JavaScript.ORDER_CONDITIONAL)||"null";return[e+" ? "+b+" : "+d,i.JavaScript.ORDER_CONDITIONAL]};i.JavaScript.loops={};i.JavaScript.controls_repeat_ext=function(f){var g=f.getField("TIMES")?+f.getFieldValue("TIMES")+"":i.JavaScript.valueToCode(f,"TIMES",i.JavaScript.ORDER_ASSIGNMENT)||"0",b=i.JavaScript.statementToCode(f,"DO");b=i.JavaScript.addLoopTrap(b,f);f="";var h=i.JavaScript.variableDB_.getDistinctName("count",i.VARIABLE_CATEGORY_NAME),d=g;g.match(/^\w+$/)||i.isNumber(g)||(d=i.JavaScript.variableDB_.getDistinctName("repeat_end",i.VARIABLE_CATEGORY_NAME),f+="var "+d+" = "+g+";\n");return f+("for (var "+h+" = 0; "+h+" < "+d+"; "+h+"++) {\n"+b+"}\n")};i.JavaScript.controls_repeat=i.JavaScript.controls_repeat_ext;i.JavaScript.controls_whileUntil=function(e){var a="UNTIL"==e.getFieldValue("MODE"),b=i.JavaScript.valueToCode(e,"BOOL",a?i.JavaScript.ORDER_LOGICAL_NOT:i.JavaScript.ORDER_NONE)||"false",f=i.JavaScript.statementToCode(e,"DO");f=i.JavaScript.addLoopTrap(f,e);a&&(b="!"+b);return"while ("+b+") {\n"+f+"}\n"};i.JavaScript.controls_for=function(h){var j=i.JavaScript.variableDB_.getName(h.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),k=i.JavaScript.valueToCode(h,"FROM",i.JavaScript.ORDER_ASSIGNMENT)||"0",l=i.JavaScript.valueToCode(h,"TO",i.JavaScript.ORDER_ASSIGNMENT)||"0",m=i.JavaScript.valueToCode(h,"BY",i.JavaScript.ORDER_ASSIGNMENT)||"1",e=i.JavaScript.statementToCode(h,"DO");e=i.JavaScript.addLoopTrap(e,h);if(i.isNumber(k)&&i.isNumber(l)&&i.isNumber(m)){var n=+k<=+l;h="for ("+j+" = "+k+"; "+j+(n?" <= ":" >= ")+l+"; "+j;j=Math.abs(+m);h=(1==j?h+(n?"++":"--"):h+((n?" += ":" -= ")+j))+(") {\n"+e+"}\n")}else h="",n=k,k.match(/^\w+$/)||i.isNumber(k)||(n=i.JavaScript.variableDB_.getDistinctName(j+"_start",i.VARIABLE_CATEGORY_NAME),h+="var "+n+" = "+k+";\n"),k=l,l.match(/^\w+$/)||i.isNumber(l)||(k=i.JavaScript.variableDB_.getDistinctName(j+"_end",i.VARIABLE_CATEGORY_NAME),h+="var "+k+" = "+l+";\n"),l=i.JavaScript.variableDB_.getDistinctName(j+"_inc",i.VARIABLE_CATEGORY_NAME),h+="var "+l+" = ",h=i.isNumber(m)?h+(Math.abs(m)+";\n"):h+("Math.abs("+m+");\n"),h=h+("if ("+n+" > "+k+") {\n")+(i.JavaScript.INDENT+l+" = -"+l+";\n"),h+="}\n",h+="for ("+j+" = "+n+"; "+l+" >= 0 ? "+j+" <= "+k+" : "+j+" >= "+k+"; "+j+" += "+l+") {\n"+e+"}\n";return h};i.JavaScript.controls_forEach=function(f){var g=i.JavaScript.variableDB_.getName(f.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),b=i.JavaScript.valueToCode(f,"LIST",i.JavaScript.ORDER_ASSIGNMENT)||"[]",h=i.JavaScript.statementToCode(f,"DO");h=i.JavaScript.addLoopTrap(h,f);f="";var j=b;b.match(/^\w+$/)||(j=i.JavaScript.variableDB_.getDistinctName(g+"_list",i.VARIABLE_CATEGORY_NAME),f+="var "+j+" = "+b+";\n");b=i.JavaScript.variableDB_.getDistinctName(g+"_index",i.VARIABLE_CATEGORY_NAME);h=i.JavaScript.INDENT+g+" = "+j+"["+b+"];\n"+h;return f+("for (var "+b+" in "+j+") {\n"+h+"}\n")};i.JavaScript.controls_flow_statements=function(d){var a="";i.JavaScript.STATEMENT_PREFIX&&(a+=i.JavaScript.injectId(i.JavaScript.STATEMENT_PREFIX,d));i.JavaScript.STATEMENT_SUFFIX&&(a+=i.JavaScript.injectId(i.JavaScript.STATEMENT_SUFFIX,d));if(i.JavaScript.STATEMENT_PREFIX){var e=i.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(d);e&&!e.suppressPrefixSuffix&&(a+=i.JavaScript.injectId(i.JavaScript.STATEMENT_PREFIX,e))}switch(d.getFieldValue("FLOW")){case"BREAK":return a+"break;\n";case"CONTINUE":return a+"continue;\n";}throw Error("Unknown flow statement.")};i.JavaScript.math={};i.JavaScript.math_number=function(b){b=+b.getFieldValue("NUM");return[b,0<=b?i.JavaScript.ORDER_ATOMIC:i.JavaScript.ORDER_UNARY_NEGATION]};i.JavaScript.math_arithmetic=function(e){var f={ADD:[" + ",i.JavaScript.ORDER_ADDITION],MINUS:[" - ",i.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",i.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",i.JavaScript.ORDER_DIVISION],POWER:[null,i.JavaScript.ORDER_COMMA]}[e.getFieldValue("OP")],g=f[0];f=f[1];var c=i.JavaScript.valueToCode(e,"A",f)||"0";e=i.JavaScript.valueToCode(e,"B",f)||"0";return g?[c+g+e,f]:["Math.pow("+c+", "+e+")",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.math_single=function(d){var e=d.getFieldValue("OP");if("NEG"==e)return d=i.JavaScript.valueToCode(d,"NUM",i.JavaScript.ORDER_UNARY_NEGATION)||"0","-"==d[0]&&(d=" "+d),["-"+d,i.JavaScript.ORDER_UNARY_NEGATION];d="SIN"==e||"COS"==e||"TAN"==e?i.JavaScript.valueToCode(d,"NUM",i.JavaScript.ORDER_DIVISION)||"0":i.JavaScript.valueToCode(d,"NUM",i.JavaScript.ORDER_NONE)||"0";switch(e){case"ABS":var b="Math.abs("+d+")";break;case"ROOT":b="Math.sqrt("+d+")";break;case"LN":b="Math.log("+d+")";break;case"EXP":b="Math.exp("+d+")";break;case"POW10":b="Math.pow(10,"+d+")";break;case"ROUND":b="Math.round("+d+")";break;case"ROUNDUP":b="Math.ceil("+d+")";break;case"ROUNDDOWN":b="Math.floor("+d+")";break;case"SIN":b="Math.sin("+d+" / 180 * Math.PI)";break;case"COS":b="Math.cos("+d+" / 180 * Math.PI)";break;case"TAN":b="Math.tan("+d+" / 180 * Math.PI)";}if(b)return[b,i.JavaScript.ORDER_FUNCTION_CALL];switch(e){case"LOG10":b="Math.log("+d+") / Math.log(10)";break;case"ASIN":b="Math.asin("+d+") / Math.PI * 180";break;case"ACOS":b="Math.acos("+d+") / Math.PI * 180";break;case"ATAN":b="Math.atan("+d+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+e);}return[b,i.JavaScript.ORDER_DIVISION]};i.JavaScript.math_constant=function(b){return{PI:["Math.PI",i.JavaScript.ORDER_MEMBER],E:["Math.E",i.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",i.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",i.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",i.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",i.JavaScript.ORDER_ATOMIC]}[b.getFieldValue("CONSTANT")]};i.JavaScript.math_number_property=function(e){var f=i.JavaScript.valueToCode(e,"NUMBER_TO_CHECK",i.JavaScript.ORDER_MODULUS)||"0",b=e.getFieldValue("PROPERTY");if("PRIME"==b)return[i.JavaScript.provideFunction_("mathIsPrime",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+f+")",i.JavaScript.ORDER_FUNCTION_CALL];switch(b){case"EVEN":var c=f+" % 2 == 0";break;case"ODD":c=f+" % 2 == 1";break;case"WHOLE":c=f+" % 1 == 0";break;case"POSITIVE":c=f+" > 0";break;case"NEGATIVE":c=f+" < 0";break;case"DIVISIBLE_BY":e=i.JavaScript.valueToCode(e,"DIVISOR",i.JavaScript.ORDER_MODULUS)||"0",c=f+" % "+e+" == 0";}return[c,i.JavaScript.ORDER_EQUALITY]};i.JavaScript.math_change=function(c){var d=i.JavaScript.valueToCode(c,"DELTA",i.JavaScript.ORDER_ADDITION)||"0";c=i.JavaScript.variableDB_.getName(c.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME);return c+" = (typeof "+c+" == 'number' ? "+c+" : 0) + "+d+";\n"};i.JavaScript.math_round=i.JavaScript.math_single;i.JavaScript.math_trig=i.JavaScript.math_single;i.JavaScript.math_on_list=function(c){var d=c.getFieldValue("OP");switch(d){case"SUM":c=i.JavaScript.valueToCode(c,"LIST",i.JavaScript.ORDER_MEMBER)||"[]";c+=".reduce(function(x, y) {return x + y;})";break;case"MIN":c=i.JavaScript.valueToCode(c,"LIST",i.JavaScript.ORDER_COMMA)||"[]";c="Math.min.apply(null, "+c+")";break;case"MAX":c=i.JavaScript.valueToCode(c,"LIST",i.JavaScript.ORDER_COMMA)||"[]";c="Math.max.apply(null, "+c+")";break;case"AVERAGE":d=i.JavaScript.provideFunction_("mathMean",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]);c=i.JavaScript.valueToCode(c,"LIST",i.JavaScript.ORDER_NONE)||"[]";c=d+"("+c+")";break;case"MEDIAN":d=i.JavaScript.provideFunction_("mathMedian",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]);c=i.JavaScript.valueToCode(c,"LIST",i.JavaScript.ORDER_NONE)||"[]";c=d+"("+c+")";break;case"MODE":d=i.JavaScript.provideFunction_("mathModes",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]);c=i.JavaScript.valueToCode(c,"LIST",i.JavaScript.ORDER_NONE)||"[]";c=d+"("+c+")";break;case"STD_DEV":d=i.JavaScript.provideFunction_("mathStandardDeviation",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]);c=i.JavaScript.valueToCode(c,"LIST",i.JavaScript.ORDER_NONE)||"[]";c=d+"("+c+")";break;case"RANDOM":d=i.JavaScript.provideFunction_("mathRandomList",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]);c=i.JavaScript.valueToCode(c,"LIST",i.JavaScript.ORDER_NONE)||"[]";c=d+"("+c+")";break;default:throw Error("Unknown operator: "+d);}return[c,i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.math_modulo=function(c){var d=i.JavaScript.valueToCode(c,"DIVIDEND",i.JavaScript.ORDER_MODULUS)||"0";c=i.JavaScript.valueToCode(c,"DIVISOR",i.JavaScript.ORDER_MODULUS)||"0";return[d+" % "+c,i.JavaScript.ORDER_MODULUS]};i.JavaScript.math_constrain=function(d){var e=i.JavaScript.valueToCode(d,"VALUE",i.JavaScript.ORDER_COMMA)||"0",b=i.JavaScript.valueToCode(d,"LOW",i.JavaScript.ORDER_COMMA)||"0";d=i.JavaScript.valueToCode(d,"HIGH",i.JavaScript.ORDER_COMMA)||"Infinity";return["Math.min(Math.max("+e+", "+b+"), "+d+")",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.math_random_int=function(c){var d=i.JavaScript.valueToCode(c,"FROM",i.JavaScript.ORDER_COMMA)||"0";c=i.JavaScript.valueToCode(c,"TO",i.JavaScript.ORDER_COMMA)||"0";return[i.JavaScript.provideFunction_("mathRandomInt",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+d+", "+c+")",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.math_random_float=function(){return["Math.random()",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.math_atan2=function(c){var a=i.JavaScript.valueToCode(c,"X",i.JavaScript.ORDER_COMMA)||"0";return["Math.atan2("+(i.JavaScript.valueToCode(c,"Y",i.JavaScript.ORDER_COMMA)||"0")+", "+a+") / Math.PI * 180",i.JavaScript.ORDER_DIVISION]};i.JavaScript.procedures={};i.JavaScript.procedures_defreturn=function(j){var a=i.JavaScript.variableDB_.getName(j.getFieldValue("NAME"),i.PROCEDURE_CATEGORY_NAME),b="";i.JavaScript.STATEMENT_PREFIX&&(b+=i.JavaScript.injectId(i.JavaScript.STATEMENT_PREFIX,j));i.JavaScript.STATEMENT_SUFFIX&&(b+=i.JavaScript.injectId(i.JavaScript.STATEMENT_SUFFIX,j));b&&(b=i.JavaScript.prefixLines(b,i.JavaScript.INDENT));var l="";i.JavaScript.INFINITE_LOOP_TRAP&&(l=i.JavaScript.prefixLines(i.JavaScript.injectId(i.JavaScript.INFINITE_LOOP_TRAP,j),i.JavaScript.INDENT));var m=i.JavaScript.statementToCode(j,"STACK"),e=i.JavaScript.valueToCode(j,"RETURN",i.JavaScript.ORDER_NONE)||"",n="";m&&e&&(n=b);e&&(e=i.JavaScript.INDENT+"return "+e+";\n");for(var o=[],k=0;k<j.arguments_.length;k++){o[k]=i.JavaScript.variableDB_.getName(j.arguments_[k],i.VARIABLE_CATEGORY_NAME)}b="function "+a+"("+o.join(", ")+") {\n"+b+l+m+n+e+"}";b=i.JavaScript.scrub_(j,b);i.JavaScript.definitions_["%"+a]=b;return null};i.JavaScript.procedures_defnoreturn=i.JavaScript.procedures_defreturn;i.JavaScript.procedures_callreturn=function(e){for(var a=i.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),i.PROCEDURE_CATEGORY_NAME),b=[],c=0;c<e.arguments_.length;c++){b[c]=i.JavaScript.valueToCode(e,"ARG"+c,i.JavaScript.ORDER_COMMA)||"null"}return[a+"("+b.join(", ")+")",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.procedures_callnoreturn=function(b){return i.JavaScript.procedures_callreturn(b)[0]+";\n"};i.JavaScript.procedures_ifreturn=function(c){var d="if ("+(i.JavaScript.valueToCode(c,"CONDITION",i.JavaScript.ORDER_NONE)||"false")+") {\n";i.JavaScript.STATEMENT_SUFFIX&&(d+=i.JavaScript.prefixLines(i.JavaScript.injectId(i.JavaScript.STATEMENT_SUFFIX,c),i.JavaScript.INDENT));c.hasReturnValue_?(c=i.JavaScript.valueToCode(c,"VALUE",i.JavaScript.ORDER_NONE)||"null",d+=i.JavaScript.INDENT+"return "+c+";\n"):d+=i.JavaScript.INDENT+"return;\n";return d+"}\n"};i.JavaScript.texts={};i.JavaScript.text=function(b){return[i.JavaScript.quote_(b.getFieldValue("TEXT")),i.JavaScript.ORDER_ATOMIC]};i.JavaScript.text_multiline=function(b){b=i.JavaScript.multiline_quote_(b.getFieldValue("TEXT"));b.includes("\n")&&(b="("+b+")");return[b,i.JavaScript.ORDER_ATOMIC]};i.JavaScript.text.forceString_=function(b){return i.JavaScript.text.forceString_.strRegExp.test(b)?b:"String("+b+")"};i.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/;i.JavaScript.text_join=function(d){switch(d.itemCount_){case 0:return["''",i.JavaScript.ORDER_ATOMIC];case 1:return d=i.JavaScript.valueToCode(d,"ADD0",i.JavaScript.ORDER_NONE)||"''",d=i.JavaScript.text.forceString_(d),[d,i.JavaScript.ORDER_FUNCTION_CALL];case 2:var e=i.JavaScript.valueToCode(d,"ADD0",i.JavaScript.ORDER_NONE)||"''";d=i.JavaScript.valueToCode(d,"ADD1",i.JavaScript.ORDER_NONE)||"''";d=i.JavaScript.text.forceString_(e)+" + "+i.JavaScript.text.forceString_(d);return[d,i.JavaScript.ORDER_ADDITION];default:e=Array(d.itemCount_);for(var f=0;f<d.itemCount_;f++){e[f]=i.JavaScript.valueToCode(d,"ADD"+f,i.JavaScript.ORDER_COMMA)||"''"}d="["+e.join(",")+"].join('')";return[d,i.JavaScript.ORDER_FUNCTION_CALL];}};i.JavaScript.text_append=function(c){var d=i.JavaScript.variableDB_.getName(c.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME);c=i.JavaScript.valueToCode(c,"TEXT",i.JavaScript.ORDER_NONE)||"''";return d+" += "+i.JavaScript.text.forceString_(c)+";\n"};i.JavaScript.text_length=function(b){return[(i.JavaScript.valueToCode(b,"VALUE",i.JavaScript.ORDER_FUNCTION_CALL)||"''")+".length",i.JavaScript.ORDER_MEMBER]};i.JavaScript.text_isEmpty=function(b){return["!"+(i.JavaScript.valueToCode(b,"VALUE",i.JavaScript.ORDER_MEMBER)||"''")+".length",i.JavaScript.ORDER_LOGICAL_NOT]};i.JavaScript.text_indexOf=function(d){var a="FIRST"==d.getFieldValue("END")?"indexOf":"lastIndexOf",e=i.JavaScript.valueToCode(d,"FIND",i.JavaScript.ORDER_NONE)||"''";a=(i.JavaScript.valueToCode(d,"VALUE",i.JavaScript.ORDER_MEMBER)||"''")+"."+a+"("+e+")";return d.workspace.options.oneBasedIndex?[a+" + 1",i.JavaScript.ORDER_ADDITION]:[a,i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.text_charAt=function(d){var e=d.getFieldValue("WHERE")||"FROM_START",b=i.JavaScript.valueToCode(d,"VALUE","RANDOM"==e?i.JavaScript.ORDER_NONE:i.JavaScript.ORDER_MEMBER)||"''";switch(e){case"FIRST":return[b+".charAt(0)",i.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[b+".slice(-1)",i.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return d=i.JavaScript.getAdjusted(d,"AT"),[b+".charAt("+d+")",i.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return d=i.JavaScript.getAdjusted(d,"AT",1,!0),[b+".slice("+d+").charAt(0)",i.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[i.JavaScript.provideFunction_("textRandomLetter",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+b+")",i.JavaScript.ORDER_FUNCTION_CALL];}throw Error("Unhandled option (text_charAt).")};i.JavaScript.text.getIndex_=function(d,a,b){return"FIRST"==a?"0":"FROM_END"==a?d+".length - 1 - "+b:"LAST"==a?d+".length - 1":b};i.JavaScript.text_getSubstring=function(h){var j=i.JavaScript.valueToCode(h,"STRING",i.JavaScript.ORDER_FUNCTION_CALL)||"''",k=h.getFieldValue("WHERE1"),c=h.getFieldValue("WHERE2");if("FIRST"!=k||"LAST"!=c)if(j.match(/^'?\w+'?$/)||"FROM_END"!=k&&"LAST"!=k&&"FROM_END"!=c&&"LAST"!=c){switch(k){case"FROM_START":var d=i.JavaScript.getAdjusted(h,"AT1");break;case"FROM_END":d=i.JavaScript.getAdjusted(h,"AT1",1,!1,i.JavaScript.ORDER_SUBTRACTION);d=j+".length - "+d;break;case"FIRST":d="0";break;default:throw Error("Unhandled option (text_getSubstring).");}switch(c){case"FROM_START":h=i.JavaScript.getAdjusted(h,"AT2",1);break;case"FROM_END":h=i.JavaScript.getAdjusted(h,"AT2",0,!1,i.JavaScript.ORDER_SUBTRACTION);h=j+".length - "+h;break;case"LAST":h=j+".length";break;default:throw Error("Unhandled option (text_getSubstring).");}j=j+".slice("+d+", "+h+")"}else{d=i.JavaScript.getAdjusted(h,"AT1");h=i.JavaScript.getAdjusted(h,"AT2");var l=i.JavaScript.text.getIndex_,f={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};j=i.JavaScript.provideFunction_("subsequence"+f[k]+f[c],["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==k||"FROM_START"==k?", at1":"")+("FROM_END"==c||"FROM_START"==c?", at2":"")+") {","  var start = "+l("sequence",k,"at1")+";","  var end = "+l("sequence",c,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+j+("FROM_END"==k||"FROM_START"==k?", "+d:"")+("FROM_END"==c||"FROM_START"==c?", "+h:"")+")"}return[j,i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.text_changeCase=function(c){var d={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[c.getFieldValue("CASE")];c=i.JavaScript.valueToCode(c,"TEXT",d?i.JavaScript.ORDER_MEMBER:i.JavaScript.ORDER_NONE)||"''";return[d?c+d:i.JavaScript.provideFunction_("textToTitleCase",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+c+")",i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.text_trim=function(c){var a={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[c.getFieldValue("MODE")];return[(i.JavaScript.valueToCode(c,"TEXT",i.JavaScript.ORDER_MEMBER)||"''")+a,i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.text_print=function(b){return"window.alert("+(i.JavaScript.valueToCode(b,"TEXT",i.JavaScript.ORDER_NONE)||"''")+");\n"};i.JavaScript.text_prompt_ext=function(c){var a="window.prompt("+(c.getField("TEXT")?i.JavaScript.quote_(c.getFieldValue("TEXT")):i.JavaScript.valueToCode(c,"TEXT",i.JavaScript.ORDER_NONE)||"''")+")";"NUMBER"==c.getFieldValue("TYPE")&&(a="Number("+a+")");return[a,i.JavaScript.ORDER_FUNCTION_CALL]};i.JavaScript.text_prompt=i.JavaScript.text_prompt_ext;i.JavaScript.text_count=function(c){var d=i.JavaScript.valueToCode(c,"TEXT",i.JavaScript.ORDER_MEMBER)||"''";c=i.JavaScript.valueToCode(c,"SUB",i.JavaScript.ORDER_NONE)||"''";return[i.JavaScript.provideFunction_("textCount",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+d+", "+c+")",i.JavaScript.ORDER_SUBTRACTION]};i.JavaScript.text_replace=function(d){var e=i.JavaScript.valueToCode(d,"TEXT",i.JavaScript.ORDER_MEMBER)||"''",b=i.JavaScript.valueToCode(d,"FROM",i.JavaScript.ORDER_NONE)||"''";d=i.JavaScript.valueToCode(d,"TO",i.JavaScript.ORDER_NONE)||"''";return[i.JavaScript.provideFunction_("textReplace",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {","  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,\"\\\\$1\")","                 .replace(/\\x08/g,\"\\\\x08\");","  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+e+", "+b+", "+d+")",i.JavaScript.ORDER_MEMBER]};i.JavaScript.text_reverse=function(b){return[(i.JavaScript.valueToCode(b,"TEXT",i.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",i.JavaScript.ORDER_MEMBER]};i.JavaScript.variables={};i.JavaScript.variables_get=function(b){return[i.JavaScript.variableDB_.getName(b.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),i.JavaScript.ORDER_ATOMIC]};i.JavaScript.variables_set=function(c){var a=i.JavaScript.valueToCode(c,"VALUE",i.JavaScript.ORDER_ASSIGNMENT)||"0";return i.JavaScript.variableDB_.getName(c.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME)+" = "+a+";\n"};i.JavaScript.variablesDynamic={};i.JavaScript.variables_get_dynamic=i.JavaScript.variables_get;i.JavaScript.variables_set_dynamic=i.JavaScript.variables_set;return i.JavaScript});
//# sourceMappingURL=javascript_compressed.min.js.map
