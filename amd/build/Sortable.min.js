function _typeof2(e){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(e){return typeof e}}else{_typeof2=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof2(e)}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define ("mod_ejsapp/Sortable",t):(e=e||self,e.Sortable=t())})(this,function(){'use strict';function e(t){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){e=function(e){return _typeof2(e)}}else{e=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)}}return e(t)}function t(e,t,o){if(t in e){Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0})}else{e[t]=o}return e}function o(){o=Object.assign||function(e){for(var t=1,o;t<arguments.length;t++){o=arguments[t];for(var n in o){if(Object.prototype.hasOwnProperty.call(o,n)){e[n]=o[n]}}}return e};return o.apply(this,arguments)}function n(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{},a=Object.keys(n);if("function"==typeof Object.getOwnPropertySymbols){a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}a.forEach(function(o){t(e,o,n[o])})}return e}function a(e,t){if(null==e)return{};var o={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++){a=n[l];if(0<=t.indexOf(a))continue;o[a]=e[a]}return o}function l(e,t){if(null==e)return{};var o=a(e,t),n,l;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++){n=r[l];if(0<=t.indexOf(n))continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;o[n]=e[n]}}return o}function r(e){return i(e)||d(e)||s()}function i(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++){o[t]=e[t]}return o}}function d(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if("undefined"!=typeof window&&window.navigator){return!!navigator.userAgent.match(e)}}var ce=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),pe=c(/Edge/i),ge=c(/firefox/i),ue=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),he=c(/iP(ad|od|hone)/i),me=c(/chrome/i)&&c(/android/i),fe={capture:!1,passive:!1};function p(e,t,o){e.addEventListener(t,o,!ce&&fe)}function g(e,t,o){e.removeEventListener(t,o,!ce&&fe)}function u(e,t){if(!t)return;">"===t[0]&&(t=t.substring(1));if(e){try{if(e.matches){return e.matches(t)}else if(e.msMatchesSelector){return e.msMatchesSelector(t)}else if(e.webkitMatchesSelector){return e.webkitMatchesSelector(t)}}catch(e){return!1}}return!1}function h(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function m(e,t,o,n){if(e){o=o||document;do{if(null!=t&&(">"===t[0]?e.parentNode===o&&u(e,t):u(e,t))||n&&e===o){return e}if(e===o)break}while(e=h(e))}return null}var ve=/\s+/g;function f(e,t,o){if(e&&t){if(e.classList){e.classList[o?"add":"remove"](t)}else{var n=(" "+e.className+" ").replace(ve," ").replace(" "+t+" "," ");e.className=(n+(o?" "+t:"")).replace(ve," ")}}}function v(e,t,o){var n=e&&e.style;if(n){if(void 0===o){if(document.defaultView&&document.defaultView.getComputedStyle){o=document.defaultView.getComputedStyle(e,"")}else if(e.currentStyle){o=e.currentStyle}return void 0===t?o:o[t]}else{if(!(t in n)&&-1===t.indexOf("webkit")){t="-webkit-"+t}n[t]=o+("string"==typeof o?"":"px")}}}function b(e,t){var o="";if("string"==typeof e){o=e}else{do{var n=v(e,"transform");if(n&&"none"!==n){o=n+" "+o}}while(!t&&(e=e.parentNode))}var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(o)}function y(e,t,o){if(e){var a=e.getElementsByTagName(t),l=0,r=a.length;if(o){for(;l<r;l++){o(a[l],l)}}return a}return[]}function E(){var e=document.scrollingElement;if(e){return e}else{return document.documentElement}}function D(e,t,o,n,a){if(!e.getBoundingClientRect&&e!==window)return;var l,r,i,d,s,c,p;if(e!==window&&e!==E()){l=e.getBoundingClientRect();r=l.top;i=l.left;d=l.bottom;s=l.right;c=l.height;p=l.width}else{r=0;i=0;d=window.innerHeight;s=window.innerWidth;c=window.innerHeight;p=window.innerWidth}if((t||o)&&e!==window){a=a||e.parentNode;if(!ce){do{if(a&&a.getBoundingClientRect&&("none"!==v(a,"transform")||o&&"static"!==v(a,"position"))){var g=a.getBoundingClientRect();r-=g.top+parseInt(v(a,"border-top-width"));i-=g.left+parseInt(v(a,"border-left-width"));d=r+l.height;s=i+l.width;break}}while(a=a.parentNode)}}if(n&&e!==window){var u=b(a||e),h=u&&u.a,m=u&&u.d;if(u){r/=m;i/=h;p/=h;c/=m;d=r+c;s=i+p}}return{top:r,left:i,bottom:d,right:s,width:p,height:c}}function _(e,t,o){var n=O(e,!0),a=D(e)[t];while(n){var l=D(n)[o],r=void 0;if("top"===o||"left"===o){r=a>=l}else{r=a<=l}if(!r)return n;if(n===E())break;n=O(n,!1)}return!1}function S(e,t,o){var n=0,a=0,l=e.children;while(a<l.length){if("none"!==l[a].style.display&&l[a]!==L.ghost&&l[a]!==L.dragged&&m(l[a],o.draggable,e,!1)){if(n===t){return l[a]}n++}a++}return null}function w(e,t){var o=e.lastElementChild;while(o&&(o===L.ghost||"none"===v(o,"display")||t&&!u(o,t))){o=o.previousElementSibling}return o||null}function C(e,t){var o=0;if(!e||!e.parentNode){return-1}while(e=e.previousElementSibling){if("TEMPLATE"!==e.nodeName.toUpperCase()&&e!==L.clone&&(!t||u(e,t))){o++}}return o}function x(e){var t=0,o=0,n=E();if(e){do{var a=b(e),l=a.a,r=a.d;t+=e.scrollLeft*l;o+=e.scrollTop*r}while(e!==n&&(e=e.parentNode))}return[t,o]}function T(e,t){for(var o in e){if(!e.hasOwnProperty(o))continue;for(var n in t){if(t.hasOwnProperty(n)&&t[n]===e[o][n])return+o}}return-1}function O(e,t){if(!e||!e.getBoundingClientRect)return E();var o=e,n=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var a=v(o);if(o.clientWidth<o.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!o.getBoundingClientRect||o===document.body)return E();if(n||t)return o;n=!0}}}while(o=o.parentNode);return E()}function N(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var be;function A(e,t){return function(){if(!be){var o=arguments,n=this;if(1===o.length){e.call(n,o[0])}else{e.apply(n,o)}be=setTimeout(function(){be=void 0},t)}}}function k(){clearTimeout(be);be=void 0}function M(e,t,o){e.scrollLeft+=t;e.scrollTop+=o}function P(e){var t=window.Polymer,o=window.jQuery||window.Zepto;if(t&&t.dom){return t.dom(e).cloneNode(!0)}else if(o){return o(e).clone(!0)[0]}else{return e.cloneNode(!0)}}function I(e,t){v(e,"position","absolute");v(e,"top",t.top);v(e,"left",t.left);v(e,"width",t.width);v(e,"height",t.height)}function R(e){v(e,"position","");v(e,"top","");v(e,"left","");v(e,"width","");v(e,"height","")}var ye="Sortable"+new Date().getTime();function X(){var e=[],t;return{captureAnimationState:function(){e=[];if(!this.options.animation)return;var t=[].slice.call(this.el.children);t.forEach(function(t){if("none"===v(t,"display")||t===L.ghost)return;e.push({target:t,rect:D(t)});var o=n({},e[e.length-1].rect);if(t.thisAnimationDuration){var a=b(t,!0);if(a){o.top-=a.f;o.left-=a.e}}t.fromRect=o})},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(T(e,{target:t}),1)},animateAll:function(o){var n=this;if(!this.options.animation){clearTimeout(t);if("function"==typeof o)o();return}var a=!1,l=0;e.forEach(function(e){var t=0,o=e.target,r=o.fromRect,i=D(o),d=o.prevFromRect,s=o.prevToRect,c=e.rect,p=b(o,!0);if(p){i.top-=p.f;i.left-=p.e}o.toRect=i;if(o.thisAnimationDuration){if(N(d,i)&&!N(r,i)&&(c.top-i.top)/(c.left-i.left)==(r.top-i.top)/(r.left-i.left)){t=B(c,d,s,n.options)}}if(!N(i,r)){o.prevFromRect=r;o.prevToRect=i;if(!t){t=n.options.animation}n.animate(o,c,i,t)}if(t){a=!0;l=Math.max(l,t);clearTimeout(o.animationResetTimer);o.animationResetTimer=setTimeout(function(){o.animationTime=0;o.prevFromRect=null;o.fromRect=null;o.prevToRect=null;o.thisAnimationDuration=null},t);o.thisAnimationDuration=t}});clearTimeout(t);if(!a){if("function"==typeof o)o()}else{t=setTimeout(function(){if("function"==typeof o)o()},l)}e=[]},animate:function(e,t,o,n){if(n){v(e,"transition","");v(e,"transform","");var a=b(this.el),l=a&&a.a,r=a&&a.d,i=(t.left-o.left)/(l||1),d=(t.top-o.top)/(r||1);e.animatingX=!!i;e.animatingY=!!d;v(e,"transform","translate3d("+i+"px,"+d+"px,0)");Y(e);v(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:""));v(e,"transform","translate3d(0,0,0)");"number"==typeof e.animated&&clearTimeout(e.animated);e.animated=setTimeout(function(){v(e,"transition","");v(e,"transform","");e.animated=!1;e.animatingX=!1;e.animatingY=!1},n)}}}}function Y(e){return e.offsetWidth}function B(e,t,o,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))*n.animation}var Ee=[],De={initializeByDefault:!0},_e={mount:function(e){for(var t in De){if(De.hasOwnProperty(t)&&!(t in e)){e[t]=De[t]}}Ee.push(e)},pluginEvent:function(e,t,o){var a=this;this.eventCanceled=!1;o.cancel=function(){a.eventCanceled=!0};var l=e+"Global";Ee.forEach(function(a){if(!t[a.pluginName])return;if(t[a.pluginName][l]){t[a.pluginName][l](n({sortable:t},o))}if(t.options[a.pluginName]&&t[a.pluginName][e]){t[a.pluginName][e](n({sortable:t},o))}})},initializePlugins:function(e,t,n){Ee.forEach(function(a){var l=a.pluginName;if(!e.options[l]&&!a.initializeByDefault)return;var r=new a(e,t,e.options);r.sortable=e;r.options=e.options;e[l]=r;o(n,r.defaults)});for(var a in e.options){if(!e.options.hasOwnProperty(a))continue;var l=this.modifyOption(e,a,e.options[a]);if("undefined"!=typeof l){e.options[a]=l}}},getEventProperties:function(e,t){var n={};Ee.forEach(function(a){if("function"!=typeof a.eventProperties)return;o(n,a.eventProperties.call(t[a.pluginName],e))});return n},modifyOption:function(e,t,o){var n;Ee.forEach(function(a){if(!e[a.pluginName])return;if(a.optionListeners&&"function"==typeof a.optionListeners[t]){n=a.optionListeners[t].call(e[a.pluginName],o)}});return n}};function F(e){var t=e.sortable,o=e.rootEl,a=e.name,l=e.targetEl,r=e.cloneEl,i=e.toEl,d=e.fromEl,s=e.oldIndex,c=e.newIndex,p=e.oldDraggableIndex,g=e.newDraggableIndex,u=e.originalEvent,h=e.putSortable,m=e.extraEventProperties;t=t||o&&o[ye];if(!t)return;var f,v=t.options,b="on"+a.charAt(0).toUpperCase()+a.substr(1);if(window.CustomEvent&&!ce&&!pe){f=new CustomEvent(a,{bubbles:!0,cancelable:!0})}else{f=document.createEvent("Event");f.initEvent(a,!0,!0)}f.to=i||o;f.from=d||o;f.item=l||o;f.clone=r;f.oldIndex=s;f.newIndex=c;f.oldDraggableIndex=p;f.newDraggableIndex=g;f.originalEvent=u;f.pullMode=h?h.lastPutMode:void 0;var y=n({},m,_e.getEventProperties(a,t));for(var E in y){f[E]=y[E]}if(o){o.dispatchEvent(f)}if(v[b]){v[b].call(t,f)}}var Se=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},a=o.evt,r=l(o,["evt"]);_e.pluginEvent.bind(L)(e,t,n({dragEl:we,parentEl:Ce,ghostEl:xe,rootEl:Te,nextEl:Oe,lastDownEl:Ne,cloneEl:Ae,cloneHidden:ke,dragStarted:je,putSortable:Ye,activeSortable:L.active,originalEvent:a,oldIndex:Me,oldDraggableIndex:Ie,newIndex:Pe,newDraggableIndex:Re,hideGhostForTarget:gt,unhideGhostForTarget:ut,cloneNowHidden:function(){ke=!0},cloneNowShown:function(){ke=!1},dispatchSortableEvent:function(e){H({sortable:t,name:e,originalEvent:a})}},r))};function H(e){F(n({putSortable:Ye,cloneEl:Ae,targetEl:we,rootEl:Te,oldIndex:Me,oldDraggableIndex:Ie,newIndex:Pe,newDraggableIndex:Re},e))}var we,Ce,xe,Te,Oe,Ne,Ae,ke,Me,Pe,Ie,Re,Xe,Ye,Be=!1,Fe=!1,He=[],Le,Ke,We,Ge,ze,Ue,je,qe,Ve,Ze=!1,Qe=!1,Je,$e,et=[],tt=!1,ot=[],nt="undefined"!=typeof document,at=he,lt=pe||ce?"cssFloat":"float",rt=nt&&!me&&!he&&"draggable"in document.createElement("div"),it=function(){if(!nt)return;if(ce){return!1}var e=document.createElement("x");e.style.cssText="pointer-events:auto";return"auto"===e.style.pointerEvents}(),dt=function(e,t){var o=v(e),n=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),a=S(e,0,t),l=S(e,1,t),r=a&&v(a),i=l&&v(l),d=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+D(a).width,s=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+D(l).width;if("flex"===o.display){return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal"}if("grid"===o.display){return 1>=o.gridTemplateColumns.split(" ").length?"vertical":"horizontal"}if(a&&r.float&&"none"!==r.float){var c="left"===r.float?"left":"right";return l&&("both"===i.clear||i.clear===c)?"vertical":"horizontal"}return a&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||d>=n&&"none"===o[lt]||l&&"none"===o[lt]&&d+s>n)?"vertical":"horizontal"},st=function(e,t,o){var n=o?e.left:e.top,a=o?e.right:e.bottom,l=o?e.width:e.height,r=o?t.left:t.top,i=o?t.right:t.bottom,d=o?t.width:t.height;return n===r||a===i||n+l/2===r+d/2},ct=function(e,t){var o;He.some(function(n){if(w(n))return;var a=D(n),l=n[ye].options.emptyInsertThreshold,r=e>=a.left-l&&e<=a.right+l,i=t>=a.top-l&&t<=a.bottom+l;if(l&&r&&i){return o=n}});return o},pt=function(t){function o(e,t){return function(n,a,l,r){var i=n.options.group.name&&a.options.group.name&&n.options.group.name===a.options.group.name;if(null==e&&(t||i)){return!0}else if(null==e||!1===e){return!1}else if(t&&"clone"===e){return e}else if("function"==typeof e){return o(e(n,a,l,r),t)(n,a,l,r)}else{var d=(t?n:a).options.group.name;return!0===e||"string"==typeof e&&e===d||e.join&&-1<e.indexOf(d)}}}var n={},a=t.group;if(!a||"object"!=e(a)){a={name:a}}n.name=a.name;n.checkPull=o(a.pull,!0);n.checkPut=o(a.put);n.revertClone=a.revertClone;t.group=n},gt=function(){if(!it&&xe){v(xe,"display","none")}},ut=function(){if(!it&&xe){v(xe,"display","")}};if(nt){document.addEventListener("click",function(e){if(Fe){e.preventDefault();e.stopPropagation&&e.stopPropagation();e.stopImmediatePropagation&&e.stopImmediatePropagation();Fe=!1;return!1}},!0)}var ht=function(e){if(we){e=e.touches?e.touches[0]:e;var t=ct(e.clientX,e.clientY);if(t){var o={};for(var n in e){if(e.hasOwnProperty(n)){o[n]=e[n]}}o.target=o.rootEl=t;o.preventDefault=void 0;o.stopPropagation=void 0;t[ye]._onDragOver(o)}}},mt=function(e){if(we){we.parentNode[ye]._isOutsideThisEl(e.target)}};function L(e,t){if(!(e&&e.nodeType&&1===e.nodeType)){throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e))}this.el=e;this.options=t=o({},t);e[ye]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return dt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==L.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};_e.initializePlugins(this,e,n);for(var a in n){a in t||(t[a]=n[a])}pt(t);for(var l in this){if("_"===l.charAt(0)&&"function"==typeof this[l]){this[l]=this[l].bind(this)}}this.nativeDraggable=t.forceFallback?!1:rt;if(this.nativeDraggable){this.options.touchStartThreshold=1}if(t.supportPointer){p(e,"pointerdown",this._onTapStart)}else{p(e,"mousedown",this._onTapStart);p(e,"touchstart",this._onTapStart)}if(this.nativeDraggable){p(e,"dragover",this);p(e,"dragenter",this)}He.push(this.el);t.store&&t.store.get&&this.sort(t.store.get(this)||[]);o(this,X())}L.prototype={constructor:L,_isOutsideThisEl:function(e){if(!this.el.contains(e)&&e!==this.el){qe=null}},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,we):this.options.direction},_onTapStart:function(e){if(!e.cancelable)return;var t=this,o=this.el,n=this.options,a=n.preventOnFilter,l=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,i=(r||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||i,s=n.filter;Z(o);if(we){return}if(/mousedown|pointerdown/.test(l)&&0!==e.button||n.disabled){return}if(d.isContentEditable){return}i=m(i,n.draggable,o,!1);if(i&&i.animated){return}if(Ne===i){return}Me=C(i);Ie=C(i,n.draggable);if("function"==typeof s){if(s.call(this,e,i,this)){H({sortable:t,rootEl:d,name:"filter",targetEl:i,toEl:o,fromEl:o});Se("filter",t,{evt:e});a&&e.cancelable&&e.preventDefault();return}}else if(s){s=s.split(",").some(function(n){n=m(d,n.trim(),o,!1);if(n){H({sortable:t,rootEl:n,name:"filter",targetEl:i,fromEl:o,toEl:o});Se("filter",t,{evt:e});return!0}});if(s){a&&e.cancelable&&e.preventDefault();return}}if(n.handle&&!m(d,n.handle,o,!1)){return}this._prepareDragStart(e,r,i)},_prepareDragStart:function(e,t,o){var n=this,a=n.el,l=n.options,r=a.ownerDocument,i;if(o&&!we&&o.parentNode===a){var d=D(o);Te=a;we=o;Ce=we.parentNode;Oe=we.nextSibling;Ne=o;Xe=l.group;L.dragged=we;Le={target:we,clientX:(t||e).clientX,clientY:(t||e).clientY};ze=Le.clientX-d.left;Ue=Le.clientY-d.top;this._lastX=(t||e).clientX;this._lastY=(t||e).clientY;we.style["will-change"]="all";i=function(){Se("delayEnded",n,{evt:e});if(L.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents();if(!ge&&n.nativeDraggable){we.draggable=!0}n._triggerDragStart(e,t);H({sortable:n,name:"choose",originalEvent:e});f(we,l.chosenClass,!0)};l.ignore.split(",").forEach(function(e){y(we,e.trim(),G)});p(r,"dragover",ht);p(r,"mousemove",ht);p(r,"touchmove",ht);p(r,"mouseup",n._onDrop);p(r,"touchend",n._onDrop);p(r,"touchcancel",n._onDrop);if(ge&&this.nativeDraggable){this.options.touchStartThreshold=4;we.draggable=!0}Se("delayStart",this,{evt:e});if(l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(pe||ce))){if(L.eventCanceled){this._onDrop();return}p(r,"mouseup",n._disableDelayedDrag);p(r,"touchend",n._disableDelayedDrag);p(r,"touchcancel",n._disableDelayedDrag);p(r,"mousemove",n._delayedDragTouchMoveHandler);p(r,"touchmove",n._delayedDragTouchMoveHandler);l.supportPointer&&p(r,"pointermove",n._delayedDragTouchMoveHandler);n._dragStartTimer=setTimeout(i,l.delay)}else{i()}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;if(Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))){this._disableDelayedDrag()}},_disableDelayedDrag:function(){we&&G(we);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;g(e,"mouseup",this._disableDelayedDrag);g(e,"touchend",this._disableDelayedDrag);g(e,"touchcancel",this._disableDelayedDrag);g(e,"mousemove",this._delayedDragTouchMoveHandler);g(e,"touchmove",this._delayedDragTouchMoveHandler);g(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e;if(!this.nativeDraggable||t){if(this.options.supportPointer){p(document,"pointermove",this._onTouchMove)}else if(t){p(document,"touchmove",this._onTouchMove)}else{p(document,"mousemove",this._onTouchMove)}}else{p(we,"dragend",this);p(Te,"dragstart",this._onDragStart)}try{if(document.selection){Q(function(){document.selection.empty()})}else{window.getSelection().removeAllRanges()}}catch(e){}},_dragStarted:function(e,t){Be=!1;if(Te&&we){Se("dragStarted",this,{evt:t});if(this.nativeDraggable){p(document,"dragover",mt)}var o=this.options;e||f(we,o.dragClass,!1);f(we,o.ghostClass,!0);L.active=this;e&&this._appendGhost();H({sortable:this,name:"start",originalEvent:t})}else{this._nulling()}},_emulateDragOver:function(){if(Ke){this._lastX=Ke.clientX;this._lastY=Ke.clientY;gt();var e=document.elementFromPoint(Ke.clientX,Ke.clientY),t=e;while(e&&e.shadowRoot){e=e.shadowRoot.elementFromPoint(Ke.clientX,Ke.clientY);if(e===t)break;t=e}we.parentNode[ye]._isOutsideThisEl(e);if(t){do{if(t[ye]){var o=void 0;o=t[ye]._onDragOver({clientX:Ke.clientX,clientY:Ke.clientY,target:e,rootEl:t});if(o&&!this.options.dragoverBubble){break}}e=t}while(t=t.parentNode)}ut()}},_onTouchMove:function(e){if(Le){var t=this.options,o=t.fallbackTolerance,n=t.fallbackOffset,a=e.touches?e.touches[0]:e,l=xe&&b(xe,!0),r=xe&&l&&l.a,i=xe&&l&&l.d,d=at&&$e&&x($e),s=(a.clientX-Le.clientX+n.x)/(r||1)+(d?d[0]-et[0]:0)/(r||1),c=(a.clientY-Le.clientY+n.y)/(i||1)+(d?d[1]-et[1]:0)/(i||1);if(!L.active&&!Be){if(o&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<o){return}this._onDragStart(e,!0)}if(xe){if(l){l.e+=s-(We||0);l.f+=c-(Ge||0)}else{l={a:1,b:0,c:0,d:1,e:s,f:c}}var p="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");v(xe,"webkitTransform",p);v(xe,"mozTransform",p);v(xe,"msTransform",p);v(xe,"transform",p);We=s;Ge=c;Ke=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!xe){var e=this.options.fallbackOnBody?document.body:Te,t=D(we,!0,at,!0,e),o=this.options;if(at){$e=e;while("static"===v($e,"position")&&"none"===v($e,"transform")&&$e!==document){$e=$e.parentNode}if($e!==document.body&&$e!==document.documentElement){if($e===document)$e=E();t.top+=$e.scrollTop;t.left+=$e.scrollLeft}else{$e=E()}et=x($e)}xe=we.cloneNode(!0);f(xe,o.ghostClass,!1);f(xe,o.fallbackClass,!0);f(xe,o.dragClass,!0);v(xe,"transition","");v(xe,"transform","");v(xe,"box-sizing","border-box");v(xe,"margin",0);v(xe,"top",t.top);v(xe,"left",t.left);v(xe,"width",t.width);v(xe,"height",t.height);v(xe,"opacity","0.8");v(xe,"position",at?"absolute":"fixed");v(xe,"zIndex","100000");v(xe,"pointerEvents","none");L.ghost=xe;e.appendChild(xe);v(xe,"transform-origin",100*(ze/parseInt(xe.style.width))+"% "+100*(Ue/parseInt(xe.style.height))+"%")}},_onDragStart:function(e,t){var o=this,n=e.dataTransfer,a=o.options;Se("dragStart",this,{evt:e});if(L.eventCanceled){this._onDrop();return}Se("setupClone",this);if(!L.eventCanceled){Ae=P(we);Ae.draggable=!1;Ae.style["will-change"]="";this._hideClone();f(Ae,this.options.chosenClass,!1);L.clone=Ae}o.cloneId=Q(function(){Se("clone",o);if(L.eventCanceled)return;if(!o.options.removeCloneOnHide){Te.insertBefore(Ae,we)}o._hideClone();H({sortable:o,name:"clone"})});t||f(we,a.dragClass,!0);if(t){Fe=!0;o._loopId=setInterval(o._emulateDragOver,50)}else{g(document,"mouseup",o._onDrop);g(document,"touchend",o._onDrop);g(document,"touchcancel",o._onDrop);if(n){n.effectAllowed="move";a.setData&&a.setData.call(o,n,we)}p(document,"drop",o);v(we,"transform","translateZ(0)")}Be=!0;o._dragStartId=Q(o._dragStarted.bind(o,t,e));p(document,"selectstart",o);je=!0;if(ue){v(document.body,"user-select","none")}},_onDragOver:function(e){var r=this.el,i=e.target,d,s,c,p=this.options,g=p.group,u=L.active,h=Xe===g,b=p.sort,y=Ye||u,E,S=this,x=!1;if(tt)return;function t(t,o){Se(t,S,n({evt:e,isOwner:h,axis:E?"vertical":"horizontal",revert:c,dragRect:d,targetRect:s,canSort:b,fromSortable:y,target:i,completed:a,onMove:function(t,o){return W(Te,r,we,d,t,D(t),e,o)},changed:l},o))}function o(){t("dragOverAnimationCapture");S.captureAnimationState();if(S!==y){y.captureAnimationState()}}function a(o){t("dragOverCompleted",{insertion:o});if(o){if(h){u._hideClone()}else{u._showClone(S)}if(S!==y){f(we,Ye?Ye.options.ghostClass:u.options.ghostClass,!1);f(we,p.ghostClass,!0)}if(Ye!==S&&S!==L.active){Ye=S}else if(S===L.active&&Ye){Ye=null}if(y===S){S._ignoreWhileAnimating=i}S.animateAll(function(){t("dragOverAnimationComplete");S._ignoreWhileAnimating=null});if(S!==y){y.animateAll();y._ignoreWhileAnimating=null}}if(i===we&&!we.animated||i===r&&!i.animated){qe=null}if(!p.dragoverBubble&&!e.rootEl&&i!==document){we.parentNode[ye]._isOutsideThisEl(e.target);o||ht(e)}!p.dragoverBubble&&e.stopPropagation&&e.stopPropagation();return x=!0}function l(){Pe=C(we);Re=C(we,p.draggable);H({sortable:S,name:"change",toEl:r,newIndex:Pe,newDraggableIndex:Re,originalEvent:e})}if(void 0!==e.preventDefault){e.cancelable&&e.preventDefault()}i=m(i,p.draggable,r,!0);t("dragOver");if(L.eventCanceled)return x;if(we.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||S._ignoreWhileAnimating===i){return a(!1)}Fe=!1;if(u&&!p.disabled&&(h?b||(c=!Te.contains(we)):Ye===this||(this.lastPutMode=Xe.checkPull(this,u,we,e))&&g.checkPut(this,u,we,e))){E="vertical"===this._getDirection(e,i);d=D(we);t("dragOverValid");if(L.eventCanceled)return x;if(c){Ce=Te;o();this._hideClone();t("revert");if(!L.eventCanceled){if(Oe){Te.insertBefore(we,Oe)}else{Te.appendChild(we)}}return a(!0)}var T=w(r,p.draggable);if(!T||U(e,E,this)&&!T.animated){if(T===we){return a(!1)}if(T&&r===e.target){i=T}if(i){s=D(i)}if(!1!==W(Te,r,we,d,i,s,e,!!i)){o();r.appendChild(we);Ce=r;l();return a(!0)}}else if(i.parentNode===r){s=D(i);var O=0,N,A=we.parentNode!==r,k=!st(we.animated&&we.toRect||d,i.animated&&i.toRect||s,E),P=E?"top":"left",I=_(i,"top","top")||_(we,"top","top"),R=I?I.scrollTop:void 0;if(qe!==i){N=s[P];Ze=!1;Qe=!k&&p.invertSwap||A}O=j(e,i,s,E,k?1:p.swapThreshold,null==p.invertedSwapThreshold?p.swapThreshold:p.invertedSwapThreshold,Qe,qe===i);var X;if(0!==O){var Y=C(we);do{Y-=O;X=Ce.children[Y]}while(X&&("none"===v(X,"display")||X===xe))}if(0===O||X===i){return a(!1)}qe=i;Ve=O;var B=i.nextElementSibling,F=!1;F=1===O;var K=W(Te,r,we,d,i,s,e,F);if(!1!==K){if(1===K||-1===K){F=1===K}tt=!0;setTimeout(z,30);o();if(F&&!B){r.appendChild(we)}else{i.parentNode.insertBefore(we,F?B:i)}if(I){M(I,0,R-I.scrollTop)}Ce=we.parentNode;if(N!==void 0&&!Qe){Je=Math.abs(N-D(i)[P])}l();return a(!0)}}if(r.contains(we)){return a(!1)}}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){g(document,"mousemove",this._onTouchMove);g(document,"touchmove",this._onTouchMove);g(document,"pointermove",this._onTouchMove);g(document,"dragover",ht);g(document,"mousemove",ht);g(document,"touchmove",ht)},_offUpEvents:function(){var e=this.el.ownerDocument;g(e,"mouseup",this._onDrop);g(e,"touchend",this._onDrop);g(e,"pointerup",this._onDrop);g(e,"touchcancel",this._onDrop);g(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;Pe=C(we);Re=C(we,o.draggable);Se("drop",this,{evt:e});Ce=we&&we.parentNode;Pe=C(we);Re=C(we,o.draggable);if(L.eventCanceled){this._nulling();return}Be=!1;Qe=!1;Ze=!1;clearInterval(this._loopId);clearTimeout(this._dragStartTimer);J(this.cloneId);J(this._dragStartId);if(this.nativeDraggable){g(document,"drop",this);g(t,"dragstart",this._onDragStart)}this._offMoveEvents();this._offUpEvents();if(ue){v(document.body,"user-select","")}v(we,"transform","");if(e){if(je){e.cancelable&&e.preventDefault();o.dropBubble||e.stopPropagation()}xe&&xe.parentNode&&xe.parentNode.removeChild(xe);if(Te===Ce||Ye&&"clone"!==Ye.lastPutMode){Ae&&Ae.parentNode&&Ae.parentNode.removeChild(Ae)}if(we){if(this.nativeDraggable){g(we,"dragend",this)}G(we);we.style["will-change"]="";if(je&&!Be){f(we,Ye?Ye.options.ghostClass:this.options.ghostClass,!1)}f(we,this.options.chosenClass,!1);H({sortable:this,name:"unchoose",toEl:Ce,newIndex:null,newDraggableIndex:null,originalEvent:e});if(Te!==Ce){if(0<=Pe){H({rootEl:Ce,name:"add",toEl:Ce,fromEl:Te,originalEvent:e});H({sortable:this,name:"remove",toEl:Ce,originalEvent:e});H({rootEl:Ce,name:"sort",toEl:Ce,fromEl:Te,originalEvent:e});H({sortable:this,name:"sort",toEl:Ce,originalEvent:e})}Ye&&Ye.save()}else{if(Pe!==Me){if(0<=Pe){H({sortable:this,name:"update",toEl:Ce,originalEvent:e});H({sortable:this,name:"sort",toEl:Ce,originalEvent:e})}}}if(L.active){if(null==Pe||-1===Pe){Pe=Me;Re=Ie}H({sortable:this,name:"end",toEl:Ce,originalEvent:e});this.save()}}}this._nulling()},_nulling:function(){Se("nulling",this);Te=we=Ce=xe=Oe=Ae=Ne=ke=Le=Ke=je=Pe=Re=Me=Ie=qe=Ve=Ye=Xe=L.dragged=L.ghost=L.clone=L.active=null;ot.forEach(function(e){e.checked=!0});ot.length=We=Ge=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":if(we){this._onDragOver(e);K(e)}break;case"selectstart":e.preventDefault();break;}},toArray:function(){var e=[],t,o=this.el.children,a=0,l=o.length,n=this.options;for(;a<l;a++){t=o[a];if(m(t,n.draggable,this.el,!1)){e.push(t.getAttribute(n.dataIdAttr)||V(t))}}return e},sort:function(e){var t={},o=this.el;this.toArray().forEach(function(e,n){var a=o.children[n];if(m(a,this.options.draggable,o,!1)){t[e]=a}},this);e.forEach(function(e){if(t[e]){o.removeChild(t[e]);o.appendChild(t[e])}})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return m(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(void 0===t){return o[e]}else{var n=_e.modifyOption(this,e,t);if("undefined"!=typeof n){o[e]=n}else{o[e]=t}if("group"===e){pt(o)}}},destroy:function(){Se("destroy",this);var e=this.el;e[ye]=null;g(e,"mousedown",this._onTapStart);g(e,"touchstart",this._onTapStart);g(e,"pointerdown",this._onTapStart);if(this.nativeDraggable){g(e,"dragover",this);g(e,"dragenter",this)}Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();He.splice(He.indexOf(this.el),1);this.el=e=null},_hideClone:function(){if(!ke){Se("hideClone",this);if(L.eventCanceled)return;v(Ae,"display","none");if(this.options.removeCloneOnHide&&Ae.parentNode){Ae.parentNode.removeChild(Ae)}ke=!0}},_showClone:function(e){if("clone"!==e.lastPutMode){this._hideClone();return}if(ke){Se("showClone",this);if(L.eventCanceled)return;if(Te.contains(we)&&!this.options.group.revertClone){Te.insertBefore(Ae,we)}else if(Oe){Te.insertBefore(Ae,Oe)}else{Te.appendChild(Ae)}if(this.options.group.revertClone){this.animate(we,Ae)}v(Ae,"display","");ke=!1}}};function K(e){if(e.dataTransfer){e.dataTransfer.dropEffect="move"}e.cancelable&&e.preventDefault()}function W(e,t,o,n,a,l,r,i){var d,s=e[ye],c=s.options.onMove,p;if(window.CustomEvent&&!ce&&!pe){d=new CustomEvent("move",{bubbles:!0,cancelable:!0})}else{d=document.createEvent("Event");d.initEvent("move",!0,!0)}d.to=t;d.from=e;d.dragged=o;d.draggedRect=n;d.related=a||t;d.relatedRect=l||D(t);d.willInsertAfter=i;d.originalEvent=r;e.dispatchEvent(d);if(c){p=c.call(s,d,r)}return p}function G(e){e.draggable=!1}function z(){tt=!1}function U(e,t,o){var n=D(w(o.el,o.options.draggable)),a=10;return t?e.clientX>n.right+a||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+a}function j(e,t,o,n,a,l,r,i){var d=n?e.clientY:e.clientX,s=n?o.height:o.width,c=n?o.top:o.left,p=n?o.bottom:o.right,g=!1;if(!r){if(i&&Je<s*a){if(!Ze&&(1===Ve?d>c+s*l/2:d<p-s*l/2)){Ze=!0}if(!Ze){if(1===Ve?d<c+Je:d>p-Je){return-Ve}}else{g=!0}}else{if(d>c+s*(1-a)/2&&d<p-s*(1-a)/2){return q(t)}}}g=g||r;if(g){if(d<c+s*l/2||d>p-s*l/2){return d>c+s/2?1:-1}}return 0}function q(e){if(C(we)<C(e)){return 1}else{return-1}}function V(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,n=0;while(o--){n+=t.charCodeAt(o)}return n.toString(36)}function Z(e){ot.length=0;var t=e.getElementsByTagName("input"),o=t.length;while(o--){var n=t[o];n.checked&&ot.push(n)}}function Q(e){return setTimeout(e,0)}function J(e){return clearTimeout(e)}if(nt){p(document,"touchmove",function(e){if((L.active||Be)&&e.cancelable){e.preventDefault()}})}L.utils={on:p,off:g,css:v,find:y,is:function(e,t){return!!m(e,t,e,!1)},extend:function(e,t){if(e&&t){for(var o in t){if(t.hasOwnProperty(o)){e[o]=t[o]}}}return e},throttle:A,closest:m,toggleClass:f,clone:P,index:C,nextTick:Q,cancelNextTick:J,detectDirection:dt,getChild:S};L.get=function(e){return e[ye]};L.mount=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++){t[o]=arguments[o]}if(t[0].constructor===Array)t=t[0];t.forEach(function(e){if(!e.prototype||!e.prototype.constructor){throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e))}if(e.utils)L.utils=n({},L.utils,e.utils);_e.mount(e)})};L.create=function(e,t){return new L(e,t)};L.version="1.10.2";var ft=[],vt,bt,yt=!1,Et,Dt,_t,St;function $(){function e(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this){if("_"===e.charAt(0)&&"function"==typeof this[e]){this[e]=this[e].bind(this)}}}e.prototype={dragStarted:function(e){var t=e.originalEvent;if(this.sortable.nativeDraggable){p(document,"dragover",this._handleAutoScroll)}else{if(this.options.supportPointer){p(document,"pointermove",this._handleFallbackAutoScroll)}else if(t.touches){p(document,"touchmove",this._handleFallbackAutoScroll)}else{p(document,"mousemove",this._handleFallbackAutoScroll)}}},dragOverCompleted:function(e){var t=e.originalEvent;if(!this.options.dragOverBubble&&!t.rootEl){this._handleAutoScroll(t)}},drop:function(){if(this.sortable.nativeDraggable){g(document,"dragover",this._handleAutoScroll)}else{g(document,"pointermove",this._handleFallbackAutoScroll);g(document,"touchmove",this._handleFallbackAutoScroll);g(document,"mousemove",this._handleFallbackAutoScroll)}te();ee();k()},nulling:function(){_t=bt=vt=yt=St=Et=Dt=null;ft.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var o=this,n=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=document.elementFromPoint(n,a);_t=e;if(t||pe||ce||ue){wt(e,this.options,l,t);var r=O(l,!0);if(yt&&(!St||n!==Et||a!==Dt)){St&&te();St=setInterval(function(){var l=O(document.elementFromPoint(n,a),!0);if(l!==r){r=l;ee()}wt(e,o.options,l,t)},10);Et=n;Dt=a}}else{if(!this.options.bubbleScroll||O(l,!0)===E()){ee();return}wt(e,this.options,O(l,!1),!1)}}};return o(e,{pluginName:"scroll",initializeByDefault:!0})}function ee(){ft.forEach(function(e){clearInterval(e.pid)});ft=[]}function te(){clearInterval(St)}var wt=A(function(e,t,o,n){if(!t.scroll)return;var a=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,d=t.scrollSpeed,s=E(),c=!1,p;if(bt!==o){bt=o;ee();vt=t.scroll;p=t.scrollFn;if(!0===vt){vt=O(o,!0)}}var g=0,u=vt;do{var h=u,m=D(h),f=m.top,b=m.bottom,y=m.left,_=m.right,S=m.width,w=m.height,C=void 0,x=void 0,T=h.scrollWidth,N=h.scrollHeight,A=v(h),k=h.scrollLeft,P=h.scrollTop;if(h===s){C=S<T&&("auto"===A.overflowX||"scroll"===A.overflowX||"visible"===A.overflowX);x=w<N&&("auto"===A.overflowY||"scroll"===A.overflowY||"visible"===A.overflowY)}else{C=S<T&&("auto"===A.overflowX||"scroll"===A.overflowX);x=w<N&&("auto"===A.overflowY||"scroll"===A.overflowY)}var I=C&&(Math.abs(_-a)<=r&&k+S<T)-(Math.abs(y-a)<=r&&!!k),R=x&&(Math.abs(b-l)<=r&&P+w<N)-(Math.abs(f-l)<=r&&!!P);if(!ft[g]){for(var X=0;X<=g;X++){if(!ft[X]){ft[X]={}}}}if(ft[g].vx!=I||ft[g].vy!=R||ft[g].el!==h){ft[g].el=h;ft[g].vx=I;ft[g].vy=R;clearInterval(ft[g].pid);if(0!=I||0!=R){c=!0;ft[g].pid=setInterval(function(){if(n&&0===this.layer){L.active._onTouchMove(_t)}var t=ft[this.layer].vy?ft[this.layer].vy*d:0,o=ft[this.layer].vx?ft[this.layer].vx*d:0;if("function"==typeof p){if("continue"!==p.call(L.dragged.parentNode[ye],o,t,e,_t,ft[this.layer].el)){return}}M(ft[this.layer].el,o,t)}.bind({layer:g}),24)}}g++}while(t.bubbleScroll&&u!==s&&(u=O(u,!1)));yt=c},30),Ct=function(e){var t=e.originalEvent,o=e.putSortable,n=e.dragEl,a=e.activeSortable,l=e.dispatchSortableEvent,r=e.hideGhostForTarget,i=e.unhideGhostForTarget;if(!t)return;var d=o||a;r();var s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(s.clientX,s.clientY);i();if(d&&!d.el.contains(c)){l("spill");this.onSpill({dragEl:n,putSortable:o})}};function oe(){}oe.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState();if(o){o.captureAnimationState()}var n=S(this.sortable.el,this.startIndex,this.options);if(n){this.sortable.el.insertBefore(t,n)}else{this.sortable.el.appendChild(t)}this.sortable.animateAll();if(o){o.animateAll()}},drop:Ct};o(oe,{pluginName:"revertOnSpill"});function ne(){}ne.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable,n=o||this.sortable;n.captureAnimationState();t.parentNode&&t.parentNode.removeChild(t);n.animateAll()},drop:Ct};o(ne,{pluginName:"removeOnSpill"});var xt;function ae(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}e.prototype={dragStart:function(e){var t=e.dragEl;xt=t},dragOverValid:function(e){var t=e.completed,o=e.target,n=e.onMove,a=e.activeSortable,l=e.changed,r=e.cancel;if(!a.options.swap)return;var i=this.sortable.el,d=this.options;if(o&&o!==i){var s=xt;if(!1!==n(o)){f(o,d.swapClass,!0);xt=o}else{xt=null}if(s&&s!==xt){f(s,d.swapClass,!1)}}l();t(!0);r()},drop:function(e){var t=e.activeSortable,o=e.putSortable,n=e.dragEl,a=o||this.sortable,l=this.options;xt&&f(xt,l.swapClass,!1);if(xt&&(l.swap||o&&o.options.swap)){if(n!==xt){a.captureAnimationState();if(a!==t)t.captureAnimationState();le(n,xt);a.animateAll();if(a!==t)t.animateAll()}}},nulling:function(){xt=null}};return o(e,{pluginName:"swap",eventProperties:function(){return{swapItem:xt}}})}function le(e,t){var o=e.parentNode,n=t.parentNode,a,l;if(!o||!n||o.isEqualNode(t)||n.isEqualNode(e))return;a=C(e);l=C(t);if(o.isEqualNode(n)&&a<l){l++}o.insertBefore(t,o.children[a]);n.insertBefore(e,n.children[l])}var Tt=[],Ot=[],Nt,At,kt=!1,Mt=!1,Pt=!1,It,Rt,Xt;function re(){function e(e){for(var t in this){if("_"===t.charAt(0)&&"function"==typeof this[t]){this[t]=this[t].bind(this)}}if(e.options.supportPointer){p(document,"pointerup",this._deselectMultiDrag)}else{p(document,"mouseup",this._deselectMultiDrag);p(document,"touchend",this._deselectMultiDrag)}p(document,"keydown",this._checkKeyDown);p(document,"keyup",this._checkKeyUp);this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,o){var n="";if(Tt.length&&At===e){Tt.forEach(function(e,t){n+=(!t?"":", ")+e.textContent})}else{n=o.textContent}t.setData("Text",n)}}}e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;It=t},delayEnded:function(){this.isMultiDrag=~Tt.indexOf(It)},setupClone:function(e){var t=e.sortable,o=e.cancel;if(!this.isMultiDrag)return;for(var n=0;n<Tt.length;n++){Ot.push(P(Tt[n]));Ot[n].sortableIndex=Tt[n].sortableIndex;Ot[n].draggable=!1;Ot[n].style["will-change"]="";f(Ot[n],this.options.selectedClass,!1);Tt[n]===It&&f(Ot[n],this.options.chosenClass,!1)}t._hideClone();o()},clone:function(e){var t=e.sortable,o=e.rootEl,n=e.dispatchSortableEvent,a=e.cancel;if(!this.isMultiDrag)return;if(!this.options.removeCloneOnHide){if(Tt.length&&At===t){de(!0,o);n("clone");a()}}},showClone:function(e){var t=e.cloneNowShown,o=e.rootEl,n=e.cancel;if(!this.isMultiDrag)return;de(!1,o);Ot.forEach(function(e){v(e,"display","")});t();Xt=!1;n()},hideClone:function(e){var t=this,o=e.sortable,n=e.cloneNowHidden,a=e.cancel;if(!this.isMultiDrag)return;Ot.forEach(function(e){v(e,"display","none");if(t.options.removeCloneOnHide&&e.parentNode){e.parentNode.removeChild(e)}});n();Xt=!0;a()},dragStartGlobal:function(e){e.sortable;if(!this.isMultiDrag&&At){At.multiDrag._deselectMultiDrag()}Tt.forEach(function(e){e.sortableIndex=C(e)});Tt=Tt.sort(function(e,t){return e.sortableIndex-t.sortableIndex});Pt=!0},dragStarted:function(e){var t=this,o=e.sortable;if(!this.isMultiDrag)return;if(this.options.sort){o.captureAnimationState();if(this.options.animation){Tt.forEach(function(e){if(e===It)return;v(e,"position","absolute")});var n=D(It,!1,!0,!0);Tt.forEach(function(e){if(e===It)return;I(e,n)});Mt=!0;kt=!0}}o.animateAll(function(){Mt=!1;kt=!1;if(t.options.animation){Tt.forEach(function(e){R(e)})}if(t.options.sort){se()}})},dragOver:function(e){var t=e.target,o=e.completed,n=e.cancel;if(Mt&&~Tt.indexOf(t)){o(!1);n()}},revert:function(e){var t=e.fromSortable,o=e.rootEl,n=e.sortable,a=e.dragRect;if(1<Tt.length){Tt.forEach(function(e){n.addAnimationState({target:e,rect:Mt?D(e):a});R(e);e.fromRect=a;t.removeAnimationState(e)});Mt=!1;ie(!this.options.removeCloneOnHide,o)}},dragOverCompleted:function(e){var t=e.sortable,o=e.isOwner,n=e.insertion,a=e.activeSortable,l=e.parentEl,r=e.putSortable,i=this.options;if(n){if(o){a._hideClone()}kt=!1;if(i.animation&&1<Tt.length&&(Mt||!o&&!a.options.sort&&!r)){var d=D(It,!1,!0,!0);Tt.forEach(function(e){if(e===It)return;I(e,d);l.appendChild(e)});Mt=!0}if(!o){if(!Mt){se()}if(1<Tt.length){var s=Xt;a._showClone(t);if(a.options.animation&&!Xt&&s){Ot.forEach(function(e){a.addAnimationState({target:e,rect:Rt});e.fromRect=Rt;e.thisAnimationDuration=null})}}else{a._showClone(t)}}}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,a=e.activeSortable;Tt.forEach(function(e){e.thisAnimationDuration=null});if(a.options.animation&&!n&&a.multiDrag.isMultiDrag){Rt=o({},t);var l=b(It,!0);Rt.top-=l.f;Rt.left-=l.e}},dragOverAnimationComplete:function(){if(Mt){Mt=!1;se()}},drop:function(e){var t=e.originalEvent,o=e.rootEl,a=e.parentEl,l=e.sortable,r=e.dispatchSortableEvent,d=e.oldIndex,s=e.putSortable,c=s||this.sortable;if(!t)return;var p=this.options,g=a.children;if(!Pt){if(p.multiDragKey&&!this.multiDragKeyDown){this._deselectMultiDrag()}f(It,p.selectedClass,!~Tt.indexOf(It));if(!~Tt.indexOf(It)){Tt.push(It);F({sortable:l,rootEl:o,name:"select",targetEl:It,originalEvt:t});if(t.shiftKey&&Nt&&l.el.contains(Nt)){var u=C(Nt),h=C(It);if(~u&&~h&&u!==h){var m,v;if(h>u){v=u;m=h}else{v=h;m=u+1}for(;v<m;v++){if(~Tt.indexOf(g[v]))continue;f(g[v],p.selectedClass,!0);Tt.push(g[v]);F({sortable:l,rootEl:o,name:"select",targetEl:g[v],originalEvt:t})}}}else{Nt=It}At=c}else{Tt.splice(Tt.indexOf(It),1);Nt=null;F({sortable:l,rootEl:o,name:"deselect",targetEl:It,originalEvt:t})}}if(Pt&&this.isMultiDrag){if((a[ye].options.sort||a!==o)&&1<Tt.length){var b=D(It),y=C(It,":not(."+this.options.selectedClass+")");if(!kt&&p.animation)It.thisAnimationDuration=null;c.captureAnimationState();if(!kt){if(p.animation){It.fromRect=b;Tt.forEach(function(e){e.thisAnimationDuration=null;if(e!==It){var t=Mt?D(e):b;e.fromRect=t;c.addAnimationState({target:e,rect:t})}})}se();Tt.forEach(function(e){if(g[y]){a.insertBefore(e,g[y])}else{a.appendChild(e)}y++});if(d===C(It)){var E=!1;Tt.forEach(function(e){if(e.sortableIndex!==C(e)){E=!0}});if(E){r("update")}}}Tt.forEach(function(e){R(e)});c.animateAll()}At=c}if(o===a||s&&"clone"!==s.lastPutMode){Ot.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}},nullingGlobal:function(){this.isMultiDrag=Pt=!1;Ot.length=0},destroyGlobal:function(){this._deselectMultiDrag();g(document,"pointerup",this._deselectMultiDrag);g(document,"mouseup",this._deselectMultiDrag);g(document,"touchend",this._deselectMultiDrag);g(document,"keydown",this._checkKeyDown);g(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if("undefined"!=typeof Pt&&Pt)return;if(At!==this.sortable)return;if(e&&m(e.target,this.options.draggable,this.sortable.el,!1))return;if(e&&0!==e.button)return;while(Tt.length){var t=Tt[0];f(t,this.options.selectedClass,!1);Tt.shift();F({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){if(e.key===this.options.multiDragKey){this.multiDragKeyDown=!0}},_checkKeyUp:function(e){if(e.key===this.options.multiDragKey){this.multiDragKeyDown=!1}}};return o(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[ye];if(!t||!t.options.multiDrag||~Tt.indexOf(e))return;if(At&&At!==t){At.multiDrag._deselectMultiDrag();At=t}f(e,t.options.selectedClass,!0);Tt.push(e)},deselect:function(e){var t=e.parentNode[ye],o=Tt.indexOf(e);if(!t||!t.options.multiDrag||!~o)return;f(e,t.options.selectedClass,!1);Tt.splice(o,1)}},eventProperties:function(){var e=this,t=[],o=[];Tt.forEach(function(n){t.push({multiDragElement:n,index:n.sortableIndex});var a;if(Mt&&n!==It){a=-1}else if(Mt){a=C(n,":not(."+e.options.selectedClass+")")}else{a=C(n)}o.push({multiDragElement:n,index:a})});return{items:r(Tt),clones:[].concat(Ot),oldIndicies:t,newIndicies:o}},optionListeners:{multiDragKey:function(e){e=e.toLowerCase();if("ctrl"===e){e="Control"}else if(1<e.length){e=e.charAt(0).toUpperCase()+e.substr(1)}return e}}})}function ie(e,t){Tt.forEach(function(o,n){var a=t.children[o.sortableIndex+(e?+n:0)];if(a){t.insertBefore(o,a)}else{t.appendChild(o)}})}function de(e,t){Ot.forEach(function(o,n){var a=t.children[o.sortableIndex+(e?+n:0)];if(a){t.insertBefore(o,a)}else{t.appendChild(o)}})}function se(){Tt.forEach(function(e){if(e===It)return;e.parentNode&&e.parentNode.removeChild(e)})}L.mount(new $);L.mount(ne,oe);L.mount(new ae);L.mount(new re);return L});
//# sourceMappingURL=Sortable.min.js.map
